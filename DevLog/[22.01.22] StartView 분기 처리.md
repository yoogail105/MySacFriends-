# UserDefaults, switch, enum ìœ¼ë¡œ ì‹œì‘í™”ë©´ ë¶„ê¸°ì²˜ë¦¬ í•˜ê¸°

ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì‚¬ìš©ìì˜ íšŒì› ê°€ì…ì˜ ì§„í–‰ ìƒí™©ì— ë”°ë¼ì„œ ì²˜ìŒ ì–´í”Œìœ¼ ì¼°ì„ ë•Œ ë“±ì¥í•˜ëŠ” í™”ë©´ì´ ë‹¬ë¼ì§„ë‹¤.


| ì§„í–‰ ìƒí™©                  | ì§„ì… ì‹œ í‘œì‹œë˜ëŠ” ì²« í™”ë©´ |
| -------------------------- | ------------------------ |
| ì²« ì‹œì‘                    | Onboarding View          |
| ë²ˆí˜¸ ì¸ì¦ ì „               | Auth View                |
| ë²ˆí˜¸ ì¸ì¦ í›„, íšŒì› ê°€ì… ì „ | SignUp View              |
| íšŒì› ê°€ì… í›„               | Main View                |
<br/>

â˜„ï¸ ëª©í‘œ: ì‚¬ìš©ìì˜ ìƒí™©ì— ë”°ë¼ì„œ, StartMdoeë¼ëŠ” enumì„ í†µí•´ì„œ ë¶„ê¸° ì²˜ë¦¬ë¥¼ í•˜ê³ ì í–ˆë‹¤.</br></br>
ì•„ë˜ëŠ” ë‚´ê°€ ìƒê°í•œ SceneDelegateì˜ ì½”ë“œì´ë‹¤.</br>

```swift
func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
        
        guard let windowScene = (scene as? UIWindowScene) else { return }
  
        window = UIWindow(windowScene: windowScene)
        window?.windowScene = windowScene
        
        // íìŒ..ìˆ˜ì •í•„ìš”
        let startMode:StartMode = UserDefaults.standard....
        var startViewController: UIViewController
        
        switch startMode {
        case .onBoarding:
            startViewController = OnboardingViewController()
        case .auth:
            startViewController = AuthViewController()
        case .signUp:
            startViewController = SignUpViewController()
        case .main:
            startViewController = MainViewController()
        }

        window?.rootViewController = UINavigationController(rootViewController: startViewController)
        window?.makeKeyAndVisible()
        
    }
```

`enum`ê³¼ `switchë¬¸`ì„ ì´ìš©í•´ì„œ ì´ë ‡ê²Œ í•˜ê³ ì‹¶ì€ë°......<br/>

ğŸ¾ ê·¸ëŸ¼ UserDefaultsì— StartModeì˜ íƒ€ì…ì„ ê°€ì§„ ë³€ìˆ˜ë¥¼ ì €ì¥í•´ì•¼ í•œë‹¤.<br/>
í•˜ì§€ë§Œ UserDefaultsì—ëŠ” String, Int, Bool, Date, Data ë§Œì´ ë“¤ì–´ê°€ ìˆ˜ ìˆì–´ì„œ `enum`ì€ ë„£ì„ ìˆ˜ ì—†ë‹¤.<br/>
ğŸ™‹ ê·¸ë˜ì„œ.. `rawValue`ë¥¼ í™œìš©í•´ì„œ ì €ì¥í•´ ë³´ì•˜ë‹¤.

  

```swift
enum StartMode: String {
    case onBoarding
    case auth
    case signUp
    case main
}

extension UserDefaults {
    private enum UserDefaultsKeys: String {
        case startMode
    		...
    }  
  
    var startMode: String {
        get { string(forKey: UserDefaultsKeys.startMode.rawValue) ?? StartMode.onBoarding.rawValue}
        set { setValue(newValue, forKey: UserDefaultsKeys.startMode.rawValue)}
    }
}

// ìœ ì €ë””í´íŠ¸ì˜ startModeì— StartMode.rawValueë¥¼ ì €ì¥í•˜ê¸°
UserDefaults.standard.startMode = StartMode.onBoarding.rawValue
    
```



ì´ë ‡ê²Œ í•˜ë©´ `enum StartMode`ì˜ rawValueê°’ì„ UserDefaultsì— ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆë‹¤.



í•˜ì§€ë§Œ ë”°ì§€ê³  ë³´ë©´,, sartModeëŠ” `enum SartMode: String`ì˜ `rawValue`, ì¦‰ **String**ì´ë‹¤.
<img width="563" alt="image-20220122174004772" src="https://user-images.githubusercontent.com/53874628/150633121-c2b0a218-0e41-45c1-b7a3-82fa9cf117ca.png">

<img width="728" alt="image-20220122174314262" src="https://user-images.githubusercontent.com/53874628/150633139-d8b49b38-5883-45f5-91f7-de057a40da90.png">



â‡¢ ê·¸ë˜ì„œ ë‚´ê°€ ì›í•˜ëŠ” ê²ƒì²˜ëŸ¼, switchë¬¸ì„ í†µí•´ì„œ ì²« ì‹œì‘ í™”ë©´ì„ ë¶„ê¸°í•˜ê¸° ìœ„í•´ `switchë¬¸`ì„ ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤.
<img width="721" alt="image-20220122175755084" src="https://user-images.githubusercontent.com/53874628/150633147-6fd3260d-8de4-4402-84f1-d950b908e04f.png">

ì˜¤ë¥˜ê°€ ë‚˜ëŠ” ì´ìœ ëŠ” ë³€ìˆ˜ startModeëŠ” `enum StartMdoe`ê°€ ì•„ë‹ˆë¼ `String` íƒ€ì…ì´ë¼ëŠ” ê²ƒ. 



ğŸ¾ ê·¸ë ‡ë‹¤ë©´ì–´ ì–´ë–»ê²Œ í•´ì£¼ì–´ì•¼ í• ê¹Œ?

**ğŸ™‹ `Strig íƒ€ì…`ì„ `enum íƒ€ì…`ìœ¼ë¡œ ë°”ê¾¸ì–´ì£¼ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ë‹¤.**



ì–´ë–»ê²Œ ë°”ê¾¸ì–´ì£¼ëƒë©´, rawValueë¥¼ ì´ìš©í•˜ë©´ ë¨.

`enumName(rawValue: rawValue)`

ë‚˜ì˜ ì½”ë“œì—ì„œëŠ” â£ `let startMode = StartMode(rawValue: startModeString)`

ê·¸ëŸ°ë° ì•„ë˜ì²˜ëŸ¼ enumíƒ€ì…ìœ¼ë¡œ ë³€í™˜ì„ í•´ ì£¼ê³  ë‚˜ë©´, ì˜¤ë¥˜ê°€ ëœ¬ë‹¤.

```swift
let startModeString = UserDefaults.standard.startMode
let startMode = StartMode(rawValue: startModeString)
var startViewController: UIViewController

switch startMode {
        case .onBoarding:
            startViewController = OnboardingViewController()
        case .auth:
            startViewController = AuthViewController()
        case .signUp:
            startViewController = SignUpViewController()
        case .main:
            startViewController = MainViewController()
        case .none:
            startViewController = OnboardingViewController()
}
```
<img width="721" alt="image-20220122175755084" src="https://user-images.githubusercontent.com/53874628/150633154-116c530a-bc85-4697-8354-9f51c84408ac.png">


caseë¥¼ ë¹ ëœ¨ë ¸ë‹¤ê³  ë‚˜ì˜¨ë‹¤. ë‹¤ ì¼ëŠ”ë°..?

â£ `Fix`ë¥¼ ëˆ„ë¥´ë©´ case .none ì´ë¼ê³  í•´ì„œ, ê¸°ë³¸ ê°’ì´ ì¶”ê°€ëœë‹¤.
<img width="726" alt="image-20220122180000282" src="https://user-images.githubusercontent.com/53874628/150633157-a4edfc28-b075-4b72-9b4a-ccf0d1769e4b.png">



ìš°ì„  `case .none:`ì— ëŒ€í•œ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•´ ì£¼ë©´ ì—ëŸ¬ëŠ” ì‚¬ë¼ì§„ë‹¤.

```swift
let startModeString = UserDefaults.standard.startMode
let startMode = StartMode(rawValue: startModeString)
var startViewController: UIViewController
        
        switch startMode {
        case .onBoarding:
            startViewController = OnboardingViewController()
        case .auth:
            startViewController = AuthViewController()
        case .signUp:
            startViewController = SignUpViewController()
        case .main:
            startViewController = MainViewController()
        case .none:
            startViewController = OnboardingViewController()
        }
        
```



**ğŸ¾ ê·¸ëŸ°ë°,  enumì„ ì‚¬ìš©í•˜ë©´ ì´ëŸ° ë””í´íŠ¸ê°’ì„ ì£¼ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²ƒìœ¼ë¡œ ì•Œê³  ìˆì—ˆëŠ”ë°??**

ğŸ™‹ **ìœ„ì˜ ì½”ë“œì—ì„œ ê¸°ë³¸ê°’ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ìš”êµ¬í•˜ëŠ” ì´ìœ ëŠ” ë‚´ê°€ `rawValue`ë¥¼ ì´ìš©í•´ì„œ enum íƒ€ì…ì„ ë§Œë“  ê²ƒì— ìˆë‹¤.**



swiftë¬¸ì„œë¥¼ ì‚´í´ë³´ë©´.. [(ğŸ”—ë°”ë¡œê°€ê¸°)](https://docs.swift.org/swift-book/LanguageGuide/Enumerations.html)
<img width="775" alt="image-20220122180207015" src="https://user-images.githubusercontent.com/53874628/150633183-2f6bf3b5-0844-45b3-bc07-940bb9cb4c9f.png">


`Initializing from a Raw Value ` ì¦‰, rawValueë¡œ ì´ˆê¸°í™”ë¥¼ í•˜ëŠ” ê²½ìš°ì—ëŠ”,

ğŸ‘‰ `enumeration case`ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜,

**ğŸ‘‰ `nil`ì„ ë°˜í™˜í•œë‹¤.**



ìš°ë¦¬ê°€ ì½”ë“œì—ì„œ ì…ë ¥í•˜ëŠ” Stringì´ ê¸°ì¡´ì— ì„ ì–¸ë˜ì–´ ìˆëŠ” rawValueì— ì—†ì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì—!

ì´ ë•Œì—ëŠ” `.none`ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í•˜ëŠ” ê²ƒì´ë‹¤.â—ï¸(ëŒ€ì¶© ë¹¨ê°„ì˜·ì…ì€ ì• ê¸°ê°€ ì•Œì•„ì°¨ë¦° ì§¤)



ğŸ¾ ê²°êµ­ `nil`ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•´ ì£¼ëŠ” ê²ƒì¸ë°, ì¡°ê¸ˆ ë” ê°„ë‹¨í•˜ê²Œ ì“¸ ìˆ˜ëŠ” ì—†ì„ê¹Œ?

ğŸ™‹ switchë¬¸ì—ì„œ í•˜ì§€ ì•Šê³ , `StartMode(rawValue: rawValue)`ë¥¼ ë§Œë“¤ë©´ì„œ í•´ ì¤„ ìˆ˜ ìˆë‹¤.

```swift
let startMode = StartMode(rawValue: startModeString) ?? .onBoarding
```

ìš”ë ‡ê²Œ ê¸°ë³¸ ê°’ì„ ì •í•´ì£¼ë©´ ëœë‹¤.



ê·¸ë˜ì„œ enumê°’ì„ UserDefaultsì— ì €ì¥í•˜ê³ , switchë¬¸ìœ¼ë¡œ ë¶„ê¸°ì²˜ë¦¬ë¥¼ í•˜ëŠ” ìµœì¢… ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```swift
func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
        
        guard let windowScene = (scene as? UIWindowScene) else { return }
  
        window = UIWindow(windowScene: windowScene)
        window?.windowScene = windowScene
        
        let startModeString = UserDefaults.standard.startMode
        let startMode = StartMode(rawValue: startModeString) ?? .onBoarding
        var startViewController: UIViewController
        
        switch startMode {
        case .onBoarding:
            startViewController = OnboardingViewController()
        case .auth:
            startViewController = AuthViewController()
        case .signUp:
            startViewController = SignUpViewController()
        case .main:
            startViewController = MainViewController()
        }
        
        
        window?.rootViewController = UINavigationController(rootViewController: startViewController)
        window?.makeKeyAndVisible()
        
}
```


ğŸ”– ì°¸ê³ 

- https://docs.swift.org/swift-book/LanguageGuide/Enumerations.html
- https://cocoacasts.com/ud-6-how-to-store-an-enum-in-user-defaults-in-swift

