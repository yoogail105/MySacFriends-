# Coordinator íŒ¨í„´?

ğŸ”–ì°¸ê³ 
- http://labs.brandi.co.kr/2020/06/16/kimjh.html
- https://khanlou.com/2015/01/the-coordinator/
- https://saad-eloulladi.medium.com/ios-coordinator-pattern-in-swift-39a15aa3b01b
- https://nsios.tistory.com/48
- https://nsios.tistory.com/50


</br>
íŒ€ì›ì´ `coordinator` íŒ¨í„´ì„ ì•„ëƒê³  ë¬¼ì€ ì ì´ ìˆë‹¤. ê·¸ì‚¬ì„¸ ë¶„ë“¤ì´ í•˜ì‹œëŠ” ê±´ê°€.. ì˜¤ì‰ ë­ì§€? í•˜ê³  ë„˜ì–´ê°”ì—ˆëŠ”ë°, MVVMíŒ¨í„´ì— ëŒ€í•´ì„œ ê²€ìƒ‰ì„ í•˜ë‹¤ê°€ ë§ˆì£¼ì¹˜ê²Œ ë˜ì—ˆë‹¤!


</br></br>
ê°„ë‹¨í•˜ê²Œ ë§í•˜ìë©´, **í™”ë©´ ì „í™˜ì„ ì¡°ê¸ˆ ë” ìœ ì—°í•˜ê²Œ ì‚¬ìš©í•˜ê²Œ ë„ì™€ì£¼ëŠ” ê²ƒ**ì´ë¼ê³  í•œë‹¤.

â—ï¸Coordinatorë¥¼ í†µí•´ í™”ë©´ ì´ë™ì— ê´€í•œ ë¡œì§ì„ ë”°ë¡œ êµ¬í˜„í•˜ê³ ,  ViewControllerì— ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•œë‹¤.


</br></br>
ğŸ™‹ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ë°?

ğŸ‘‰**`protocol`**ì„ í™œìš©í•œë‹¤!

</br></br>

- ì¤€ë¹„
  1. í™”ë©´ì„ ì „í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆëŠ” coordinatorí”„ë¡œí† ì½œì„ ë§Œë“ ë‹¤.
  2. extensionì„ í†µí•´ì„œ, í™”ë©´ ì „í™˜ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•œë‹¤.
- ì‚¬ìš©
  1. í™”ë©´ ì „í™˜ì„ í•˜ëŠ” ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ coordinator delegateë¥¼ ì±„íƒí•œë‹¤.
  2. í™”ë©´ ì „í™˜ì„ ì›í•˜ëŠ” ì‹œì ì—, coordinatorê°€ ê°€ì§€ê³  ìˆëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

âœ”ï¸ protocol

```swift
protocol Coordinator {
  var parentCoordinator: Coordinator? { get set }
  var childCoordinators: [Coordinator] { get set }
  var navigationController: UINavigationController { get set }
  
  func start()

}
```


- navigationConroller: í™”ë©´ ì „í™˜ì— í•„ìš”í•œ UINavigationConroller

- childCoordinator: í™”ë©´ ì „í™˜ ì‹œ ìƒì„±ë  í•˜ìœ„ Coordinatorë¥¼ ì €ì¥í•  ë•Œ ì‚¬ìš©

  ğŸ™‹coordinatorë¥¼ ìƒì„±í•˜ê³  ì €ì¥í•˜ì§€ ì•Šìœ¼ë©´, ë©”ëª¨ë¦¬ì—ì„œ ì œê±°ë˜ì§€ ì•ŠëŠ”ë‹¤.

- start: ì‹¤í–‰ë  í•¨ìˆ˜: ì‹¤ì§ˆì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±, í™”ë©´ ì „í™˜ ë° ì¢…ì†ì„± ì£¼ì…ì˜ ì—­í• ì„ í•œë‹¤.

```swift
class MainCoordinator: Coordinator {
    var parentCoordinator: Coordinator?
    var childCoordinators = [Coordinator]()
    var navigationController: UINavigationController

    init(navigationController: UINavigationController, parentCoordinator: Coordinator2?) {
        self.navigationController = navigationController
        self.parentCoordinator = parentCoordinator
    }

    func start() {
        let viewController = OnboardingViewController()
        navigationController.pushViewController(viewController, animated: true)
    }
    
    func pushToAuth() {
        let viewController = AuthViewController()
        navigationController.pushViewController(viewController, animated: true)
    }
    
    func pushToAuthSignUp() {
        let viewController = SignUpNicknameViewController()
        navigationController.pushViewController(viewController, animated: true)
    }
    
    func pushToAuthMain() {
        let viewController = MainTabBarController()
        navigationController.pushViewController(viewController, animated: true)
    }
}

```



âœ”ï¸ ì‚¬ìš©

```swift
class SceneDelegate: UIResponder, UIWindowSceneDelegate {
    
    var window: UIWindow?
    var coordinator: MainCoordinator?

    func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
        
        guard let windowScene = (scene as? UIWindowScene) else { return }
        let appWindow = UIWindow(frame: windowScene.coordinateSpace.bounds)
        appWindow.windowScene = windowScene
        
        let navigationController = UINavigationController()
        coordinator = MainCoordinator(navigationController: navigationController, parentCoordinator: coordinator)
        
        let startModeString = UserDefaults.standard.startMode
        let startMode = StartMode(rawValue: startModeString) ?? .onBoarding
        
        switch startMode {
        case .onBoarding:
            coordinator?.start()
        case .auth:
            coordinator?.pushToAuth()
        case .signUp:
            coordinator?.pushToAuthSignUp()
        case .main:
            print("go to main")
            coordinator?.pushToAuthMain()
        }

        appWindow.rootViewController = navigationController
        appWindow.makeKeyAndVisible()
        
        window = appWindow

    }
}
```

</br></br>
âœ”ï¸ ì¢‹ì€ ì ì€?

í•˜ë‚˜ì˜ coordinatorë¥¼ ê°€ì§€ê³ , ì—¬ëŸ¬ ë·°ì»¨ì—ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤ë©´ coordinatorì—ì„œë§Œ ë¡œì§ì„ ìˆ˜ì •í•˜ë©´ ëœë‹¤.
ê·¸ë˜ì„œâˆ™âˆ™âˆ™
1. í™”ë©´ ì „í™˜ ë¡œì§ì„ ë·°ì»¨ì—ì„œ ë¶„ë¦¬-> ë¹„ëŒ€í•´ì§€ëŠ” ê²ƒì„ í•´ê²°í•œë‹¤.
2. MVVM íŒ¨í„´ê³¼ ê°™ì´ ì ìš©í•˜ë©´, ì½”ë“œë¥¼ ì˜®ê¸°ëŠ” ì‘ì—…ì´ ìˆ˜ì›”í•´ì§„ë‹¤.

</br>
ì§€ê¸ˆì€ ì‹œì‘ í™”ë©´ ë¶„ê¸°ì™€ íƒ­ë°”ì—ë§Œ ì ìš©í•´ ë‘ì—ˆëŠ”ë°, ì•ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•  ì˜ˆì •ì´ë‹¤.
